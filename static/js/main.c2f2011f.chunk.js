(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/pngaaa.com-56983.60bbbc96.png"},39:function(e,t,a){e.exports=a(56)},45:function(e,t,a){},50:function(e,t,a){},54:function(e,t){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a.n(r),c=(a(41),a(21)),i=a.n(c),l=(a(45),a(12)),o=a(9),u=(a(50),a(3)),m=a(23),d=a(17),p=a.n(d),h=a(6),b=a(7),f=a(10),v=a(8),y=a(14),E=a(11),g=a(35),O=a(34),k=function(e,t){return{type:"ACTION_PLAYER_SCORE",payload:{assertions:e,score:t}}},N=function(e){return{type:"SUCESS_FETCH",payload:{response:e}}},j=function(e){return function(t){var a,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"BEGIN_FETCH"}),r.prev=1,r.next=4,p.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 4:return a=r.sent,r.next=7,p.a.awrap(a.json());case 7:n=r.sent,t(N(n)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t({type:"FAIL_FETCH",error:r.t0});case 14:case"end":return r.stop()}}),null,null,[[1,11]])}},C=function(e,t){return{type:"ACTION_LOGIN",payload:{user:e,email:t}}},w=a(33),S=a.n(w),x=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).state={email:"",user:""},e.handleChange=e.handleChange.bind(Object(y.a)(e)),e.validateEmailAndUser=e.validateEmailAndUser.bind(Object(y.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(y.a)(e)),e}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.player;this.token();e(0,0)}},{key:"validateEmailAndUser",value:function(){var e=this.state,t=e.email,a=e.user,n={user:a,assertions:0,score:0,gravatarEmail:t};return localStorage.setItem("state",JSON.stringify({player:n})),!(/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i.test(t)&&a.length>0)}},{key:"token",value:function(){var e,t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=n.sent,n.next=5,p.a.awrap(e.json());case 5:t=n.sent,a=t.token,localStorage.setItem("token",JSON.stringify(a));case 8:case"end":return n.stop()}}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(m.a)({},a,n))}},{key:"handleSubmit",value:function(e,t){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:(0,this.props.userEmailAction)(e,t);case 2:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.email;return s.a.createElement("div",{className:"hero is-fullheight"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("img",{width:"350px",src:S.a})),s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-centered"},s.a.createElement("div",{className:"column is-4"},s.a.createElement("form",{action:"",className:"box"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"email",className:"label"},"Email:"),s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{type:"text",placeholder:"john@example.com",name:"email",className:"input",onChange:this.handleChange}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",null,s.a.createElement(O.a,null))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"user",className:"label"},"Usu\xe1rio:"),s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{type:"text",placeholder:"...",name:"user",className:"input",onChange:this.handleChange}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",null,s.a.createElement(g.a,null))))),s.a.createElement(l.b,{to:"/play"},s.a.createElement("button",{disabled:this.validateEmailAndUser(),type:"button","data-testid":"btn-play",className:"button is-primary is-normal",onClick:function(){return e.handleSubmit(a,n)}},"Jogar")),s.a.createElement(l.b,{to:"/settings"},s.a.createElement("button",{style:{textAlign:"right"},type:"button",className:"button is-info is-small","data-testid":"btn-settings"},"Configura\xe7\xf5es"))))))))}}]),t}(r.Component),A=Object(o.b)(null,(function(e){return{userEmailAction:function(t,a){return e(C(t,a))},player:function(t,a){return e(k(t,a))}}}))(x),I=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"game-page"},s.a.createElement("h1",{"data-testid":"settings-title"},"Settings:"),s.a.createElement("label",{htmlFor:"set-input-1"},"More difficult:",s.a.createElement("input",{type:"checkbox",name:"More difficult",id:"set-input-1"})),s.a.createElement("label",{htmlFor:"set-input-2"},"Complex questions:",s.a.createElement("input",{type:"checkbox",name:"Complex questions: ",id:"set-input-2"})),s.a.createElement("label",{htmlFor:"set-input-3"},"I like mud puddles:",s.a.createElement("input",{type:"checkbox",name:"I like mud puddles",id:"set-input-3"})),s.a.createElement("div",null,s.a.createElement(l.b,{to:"/"},s.a.createElement("button",{type:"button"},"Back"))))}}]),t}(r.Component),_=a(24),F=a.n(_),R=a(25),q=(a(55),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).state={correct:null,incorrect:null,seconds:30,disable:!1,numberQuestion:0,visibilit:"hide",redirect:!1,scori:0},e.handleClickClassName=e.handleClickClassName.bind(Object(y.a)(e)),e.handleClickClassNameHelper=e.handleClickClassNameHelper.bind(Object(y.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(y.a)(e)),e.questions=e.questions.bind(Object(y.a)(e)),e}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval((function(){e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)}},{key:"componentDidUpdate",value:function(e,t){0===t.seconds&&this.nextQuestion()}},{key:"checkDifficulty",value:function(e){switch(e){case"hard":return 3;case"medium":return 2;case"easy":return 1;default:return 0}}},{key:"handleClickClassName",value:function(e){var t=e.target;this.handleClickClassNameHelper(t.name);var a=this.props,n=a.resp,r=a.player,s=a.playerStatus,c=s.score,i=s.assertions,l=this.state.seconds;if("correct-answer"===t.id){var o=n[0].difficulty,u=10+l*this.checkDifficulty(o)+c,m={player:{name:"",assertions:1+i,score:u,gravatarEmail:""}};localStorage.setItem("state",JSON.stringify(m)),r(1,u),this.setState((function(e){return{scori:e.scori+u}}))}}},{key:"questions",value:function(){var e=this,t=this.state,a=t.correct,r=t.incorrect,c=t.disable,i=t.seconds,l=t.numberQuestion,o=this.props.resp;return 30===i&&(n=[].concat(Object(R.a)(o[l].incorrect_answers),[o[l].correct_answer]),this.shuffle(n),this.shuffle(n)),n.map((function(t,n){return s.a.createElement("div",{key:n},s.a.createElement("button",{name:"incorrect",className:t===o[l].correct_answer?a:r,onClick:e.handleClickClassName,type:"button",key:n,"data-testid":t===o[l].correct_answer?"correct-answer":"wrong-answer-".concat(n),id:t===o[l].correct_answer?"correct-answer":"wrong-answer-".concat(n),disabled:c},t))}))}},{key:"shuffle",value:function(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a-=1;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e}},{key:"handleClickClassNameHelper",value:function(e){this.setState({incorrect:"incorrect",correct:"correct"});"correct"!==e&&"incorrect"!==e||this.setState({visibilit:"show",disable:!0})}},{key:"nextQuestion",value:function(){var e=this.state,t=e.numberQuestion,a=e.scori,n=this.props,r=n.user,s=n.arrayOfScoreAndName,c=n.playerStatus.assertions;if(4===t){var i={player:{name:r,assertions:1+c,score:a,gravatarEmail:""}};this.setState({redirect:!0}),s(i)}this.setState((function(e){return{numberQuestion:e.numberQuestion+1,seconds:30,correct:null,incorrect:null,visibilit:"hide",disable:!1}}))}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.seconds,n=e.numberQuestion,r=e.visibilit,c=this.props.resp;return!0===t?s.a.createElement(u.a,{to:"/feedback"}):s.a.createElement("div",{className:"game-page-questions"},s.a.createElement("seconds",null,a),s.a.createElement("p",{"data-testid":"question-category"},c[n].category),s.a.createElement("p",{"data-testid":"question-text"},c[n].question),s.a.createElement("div",{className:"game-page-buttons"},this.questions()),s.a.createElement("div",{className:"game-page-next"},s.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.nextQuestion,className:0===a?"show":r},"Pr\xf3xima")))}}]),t}(r.Component)),H=Object(o.b)((function(e){return{playerStatus:e.player,user:e.login.user}}),(function(e){return{player:function(t,a){return e(k(t,a))},arrayOfScoreAndName:function(t){return e(function(e){return{type:"ARRAY_SCORE",score:e}}(t))}}}))(q),Q=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).state={},e}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetch)(JSON.parse(localStorage.getItem("token")))}},{key:"render",value:function(){var e=this.props,t=e.response,a=e.name,n=e.email,r=e.totalPoints,c=F()(n).toString();return s.a.createElement("div",{className:"game-page  is-primary is-fullheight"},s.a.createElement("header",{className:"game-header has-background-info-light"},s.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(c),alt:"Gravatar","data-testid":"header-profile-picture"}),s.a.createElement("h2",{className:"title is-3 is-centered","data-testid":"header-player-name"},a," "),s.a.createElement("h2",{className:"subtitle is-5","data-testid":"header-score"},"Pontos:".concat(r))),t?s.a.createElement(H,{resp:t}):s.a.createElement("h3",null,"Loading..."),s.a.createElement("label",{htmlFor:"gravatar-email","data-testid":"input-gravatar-email"},"Gravar email:",s.a.createElement("input",{type:"text",id:"gravatar-email"})))}}]),t}(r.Component),T=Object(o.b)((function(e){return{totalPoints:e.player.score,name:e.login.user,email:e.login.email,response:e.trivia.response.results}}),(function(e){return{fetch:function(t){return e(j(t))}}}))(Q),U=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.arrayOfScore.sort((function(e,t){return t.player.score-e.player.score}));return s.a.createElement("div",{className:"game-page"},s.a.createElement("div",{className:"content"},s.a.createElement("h1",{className:"is-size-2","data-testid":"ranking-title"},"Ranking"),s.a.createElement("ul",null,e.map((function(e,t){return s.a.createElement("ul",{type:"1"},s.a.createElement("li",{className:"subtitle is-3","data-testid":"player-name-".concat(t)},e.player.name),s.a.createElement("li",{className:"subtitle is-3","data-testid":"player-score-".concat(t)}," ",e.player.score," "))}))),s.a.createElement(l.b,{to:"/","data-testid":"btn-go-home"},s.a.createElement("button",{className:"button is-success",type:"button"},"Home"))))}}]),t}(r.Component),J=Object(o.b)((function(e){return{email:e.login.email,user:e.login.user,arrayOfUserss:e.login.arrayOfUser,arrayOfScore:e.login.arrayOfScore}}))(U),M=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"assertionsVerify",value:function(e){return e<3?s.a.createElement("h3",null,s.a.createElement("strong",null,"Podia ser melhor...!")):s.a.createElement("h3",null,s.a.createElement("strong",null,"Mandou bem !"))}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.score,a=e.assertions,n=this.props,r=n.name,c=n.email,i=F()(c).toString();return s.a.createElement("div",{className:"game-page"},s.a.createElement("div",{className:"content"},s.a.createElement("header",null,s.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(i),alt:"Gravatar","data-testid":"header-profile-picture"}),s.a.createElement("h2",{"data-testid":"header-player-name"},r),s.a.createElement("h2",{"data-testid":"header-score"},"Pontos: ".concat(t)),s.a.createElement("p",{"data-testid":"feedback-text"},this.assertionsVerify(a))),s.a.createElement("section",null,s.a.createElement("p",{className:"subtitle is-3 my-2","data-testid":"feedback-total-question"},"Acertos: ".concat(a))),s.a.createElement(l.b,{className:"button is-link",to:"/","data-testid":"btn-play-again"},"Jogar novamente"),s.a.createElement(l.b,{to:"/ranking","data-testid":"btn-ranking"},s.a.createElement("button",{className:"button is-success",type:"button"},"Ver Ranking"))))}}]),t}(s.a.Component),P=Object(o.b)((function(e){return{name:e.login.user,email:e.login.email}}),null)(M);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(18),G=a(37),L=a(38),B=a(16),Y={user:"",email:"",arrayOfUser:[],arrayOfScore:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTION_LOGIN":return Object(B.a)({},e,{user:t.payload.user,email:t.payload.email});case"ARRAY_SCORE":return Object(B.a)({},e,{arrayOfScore:[].concat(Object(R.a)(e.arrayOfScore),[t.score])});default:return e}},W={response:[],isFetching:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BEGIN_FETCH":return Object(B.a)({},e,{isFetching:!0});case"SUCESS_FETCH":return Object(B.a)({},e,{response:t.payload.response,isFetching:!1});case"FAIL_FETCH":return Object(B.a)({},e,{error:t.error,isFetching:!1});default:return e}},z={name:"",assertions:0,score:0,gravatarEmail:""},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACTION_PLAYER_SCORE":return Object(B.a)({},e,{assertions:e.assertions+t.payload.assertions,score:t.payload.score});default:return e}},X=Object(D.combineReducers)({login:V,trivia:$,player:K}),Z=[L.a],ee=Object(D.createStore)(X,Object(G.composeWithDevTools)(D.applyMiddleware.apply(void 0,Z)));window.Cypress&&(window.store=ee);var te=ee;i.a.render(s.a.createElement(l.a,{basename:"/trivia-react-redux"},s.a.createElement(o.a,{store:te},s.a.createElement((function(){return s.a.createElement("div",null,s.a.createElement(u.d,null,s.a.createElement(u.b,{exact:!0,path:"/",component:A}),s.a.createElement(u.b,{exact:!0,path:"/settings",component:I}),s.a.createElement(u.b,{exact:!0,path:"/play",component:T}),s.a.createElement(u.b,{exact:!0,path:"/ranking",component:J}),s.a.createElement(u.b,{exact:!0,path:"/feedback",component:P})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.c2f2011f.chunk.js.map